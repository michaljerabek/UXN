!function(t,e){e.UXN=function(){function i(s){e||(i.DEFAULTS=t.extend({openerOpened:i.PREFIX+i.BEM.EL+"opener"+i.BEM.MOD+"opened",itemOpened:i.PREFIX+i.BEM.EL+"item"+i.BEM.MOD+"opened",subnavHasOpened:i.PREFIX+i.BEM.EL+"subnav"+i.BEM.MOD+"has-opened",openerHighlighted:i.PREFIX+i.BEM.EL+"opener"+i.BEM.MOD+"highlighted",itemHighlighted:i.PREFIX+i.BEM.EL+"item"+i.BEM.MOD+"highlighted",openerHasSubnav:i.PREFIX+i.BEM.EL+"opener"+i.BEM.MOD+"has-subnav",itemHasSubnav:i.PREFIX+i.BEM.EL+"item"+i.BEM.MOD+"has-subnav",currentSubnav:i.PREFIX+i.BEM.EL+"subnav"+i.BEM.MOD+"current",horizontal:i.PREFIX+"-horizontal",exclude:i.PREFIX+"-exclude",excludeInside:i.PREFIX+"-exclude"+i.BEM.MOD+"inside",subnavTop:i.PREFIX+i.BEM.EL+"subnav"+i.BEM.MOD+"top",subnavBottom:i.PREFIX+i.BEM.EL+"subnav"+i.BEM.MOD+"bottom",subnavLeft:i.PREFIX+i.BEM.EL+"subnav"+i.BEM.MOD+"left",subnavRight:i.PREFIX+i.BEM.EL+"subnav"+i.BEM.MOD+"right",openerHasTop:i.PREFIX+i.BEM.EL+"opener"+i.BEM.MOD+"has-top",openerHasBottom:i.PREFIX+i.BEM.EL+"opener"+i.BEM.MOD+"has-bottom",openerHasLeft:i.PREFIX+i.BEM.EL+"opener"+i.BEM.MOD+"has-left",openerHasRight:i.PREFIX+i.BEM.EL+"opener"+i.BEM.MOD+"has-right",itemHasTop:i.PREFIX+i.BEM.EL+"item"+i.BEM.MOD+"has-top",itemHasBottom:i.PREFIX+i.BEM.EL+"item"+i.BEM.MOD+"has-bottom",itemHasLeft:i.PREFIX+i.BEM.EL+"item"+i.BEM.MOD+"has-left",itemHasRight:i.PREFIX+i.BEM.EL+"item"+i.BEM.MOD+"has-right",positionSkip:i.PREFIX+"-position"+i.BEM.MOD+"skip",slidingVertical:i.PREFIX+"-sliding"+i.BEM.MOD+"vertical",slidingHorizontal:i.PREFIX+"-sliding"+i.BEM.MOD+"horizontal",noFading:i.PREFIX+"-no-fading",openerHasFadingOut:i.PREFIX+i.BEM.EL+"opener"+i.BEM.MOD+"has-fading-out",itemHasFadingOut:i.PREFIX+i.BEM.EL+"item"+i.BEM.MOD+"has-fading-out",subnavHasFadingOut:i.PREFIX+i.BEM.EL+"subnav"+i.BEM.MOD+"has-fading-out",instance:"UXN",activeInstance:"UXN"+i.BEM.MOD+"active"},i.DEFAULTS),i.POSITIONS=t.extend({CLASSES:{RESET:i.PREFIX+"-positioning"+i.BEM.EL+"reset-start"},IDS:{STYLE:i.PREFIX+"-positioning"+i.BEM.EL+"style"}},i.POSITIONS),a=t.extend({RELATIVE_TO_PARENT:i.PREFIX+"RelativeToParent",SKIP_POSITIONING:i.PREFIX+"SkipPositioning",LAST_RESET:i.PREFIX+"LastReset",RESET_SKIPPED:i.PREFIX+"ResetSkipped"},a),d=i.SKIP_MOUSE_EVENTS,e=!0),this.constructor=i,this.id="UXN-"+ +new Date,k.call(this,s),this.opt=s?t.extend({},i.DEFAULTS,s):i.DEFAULTS,w.call(this)}var e=!1;i.SUPPORT={IS_IE8:/MSIE 8.0/i.test(navigator.userAgent),IS_IELTE7:/MSIE [0-7]{1}.[0-9]+/i.test(navigator.userAgent),IS_WEBKIT:/^(?!.*edge).*(webkit|opera|safari|chrome).*$/gi.test(navigator.userAgent),IS_EDGE:/edge/i.test(navigator.userAgent),IS_FIREFOX:/firefox/i.test(navigator.userAgent),IS_FFLTE11:function(){var t=navigator.userAgent.match(/firefox\/([0-9]+)/i);return!!(t&&2===t.length&&+t[1]<=11)}(),MATCHES:!!document.body.matches,CLOSEST:!!document.body.closest,QUERYSELECTOR:!!document.body.querySelector,CLASSLIST:!!document.body.classList,CLIENTRECT:!!document.body.getBoundingClientRect,INSERT_TO_STYLE:function(){try{return document.createElement("style").innerHTML="",!0}catch(t){return!1}}(),TRANSITIONEND:function(){var t=document.createElement("div"),e=["transition","transitionend","","OTransition","otransitionend","-o-","MozTransition","transitionend","-moz-","WebkitTransition","webkitTransitionEnd","-webkit-"],i=0,s=e.length;for(i;s>i;i+=3)if(void 0!==t.style[e[i]])return this.TRANSITION_PREFIX=e[i+2],e[i+1];return null},ANIMATIONEND:function(){var t=document.createElement("div"),e=["animation","animationend","","OAnimation","oAnimationEnd","-o-","MozAnimation","animationend","-moz-","WebkitAnimation","webkitAnimationEnd","-webkit-"],i=0,s=e.length;for(i;s>i;i+=3)if(void 0!==t.style[e[i]])return this.ANIMATION_PREFIX=e[i+2],e[i+1];return null}},i.SUPPORT.ANIMATIONEND=i.SUPPORT.ANIMATIONEND(),i.SUPPORT.TRANSITIONEND=i.SUPPORT.TRANSITIONEND(),i.U={jQueryfy:function(e,s){if("object"==typeof e){if(null===e)return t();var n=e.jquery===t.prototype.jquery?e:t(e);return s&&!this.hasParent(s[0],n[0])?t():n}return s?i.U.findFirst(s,e):t(e)},hasParent:function(t,e){if(!t)return null;for(;e;)if(e=e.parentNode,e===t)return!0;return!1},toArray:function(t){return Array.prototype.slice.call(t)},toArrayWith$Objects:function(e){var i=[],s=0,n=e.length;for(s;n>s;s++)i.push(t(e[s]));return i},getRect:function(){return i.SUPPORT.IS_IE8||i.SUPPORT.IS_IELTE7?function(t){var e=t[0].getBoundingClientRect();return{left:e.left,top:e.top,bottom:e.bottom,right:e.right,width:e.right-e.left,height:e.bottom-e.top}}:i.SUPPORT.CLIENTRECT&&!i.SUPPORT.IS_FFLTE11?function(t){return t[0].getBoundingClientRect()}:function(t){var e=t.offset(),i=f.scrollTop(),s=f.scrollLeft(),n=t.outerWidth(),o=t.outerHeight();return{left:e.left-s,top:e.top-i,bottom:e.top-i+o,right:e.left-s+n,width:n,height:o}}}(),closest:function(){return i.SUPPORT.CLOSEST?function(e,i){return t(e[0].closest(i))}:function(t,e){return t.closest(e)}}(),matches:function(){return i.SUPPORT.MATCHES?function(t,e){return t[0].matches(e)}:function(t,e){return t.is(e)}}(),findFirst:function(){return i.SUPPORT.QUERYSELECTOR?function(e,i){return t(e[0].querySelector(i))}:function(t,e){return t.find(e+":first")}}(),findFirstByClass:function(t,e){return this.findFirst(t,"."+e)},findAllByClass:function(t,e){return this.findAll(t,"."+e)},findAll:function(){return i.SUPPORT.QUERYSELECTOR?function(e,i){return t(e[0].querySelectorAll(i))}:function(t,e){return t.find(e)}}(),addClass:function(){return i.SUPPORT.CLASSLIST?function(){var t=arguments[0][0],e=1,i=arguments.length;for(e;i>e;e++)t.classList.add(arguments[e])}:function(){var t=i.U.toArray(arguments),e=t.shift();e.addClass(t.join(" "))}}(),removeClass:function(){return i.SUPPORT.CLASSLIST?function(){var t=arguments[0][0],e=1,i=arguments.length;for(e;i>e;e++)t.classList.remove(arguments[e])}:function(){var t=i.U.toArray(arguments),e=t.shift();e.removeClass(t.join(" "))}}(),hasClass:function(){return i.SUPPORT.CLASSLIST?function(t,e){return t[0].classList.contains(e)}:function(t,e){return t.hasClass(e)}}()},i.MULTIPLE_INSTANCES=!1,i.VENDOR_PREFIXES=!1,i.SKIP_MOUSE_EVENTS=0,i.BEM={EL:"__",MOD:"--"},i.PREFIX="UXN",i.EVENT_NS="UXN",i.FADING_TYPE={NONE:0,ANIMATION:1,TRANSITION:2,JS:3},i.POSITIONS={MAX_BATCH:10,RELEASE_DELAY:16,DIRECTION:{NONE:0,BOTH:1,HORIZONTAL:2,VERTICAL:3},BASE:{PAGE:1,WINDOW:2}},i.EVENT_TIMERS={SCROLL:100,SCROLL_INSIDE:50,SCROLL_NEXT:350,SCROLL_TOUCH:200,RESIZE:100,ELEMENT_SIZE:250,INTERVAL:175,REPEATER:5},i.MAX_EVENTS={OUT_OF_SURROUNDING:15,OUT_OF_TRIANGLE:15},i.DEFAULTS={nav:"#main-nav",subnav:"ul",item:"li",opener:null,closer:"a",autoHide:!0,delayHide:!1,hideFollowing:!0,closeOnlyInLevel:!1,doNotCloseFirstLevel:!1,preventClickOnTouch:!0,closeOnClick:!1,keepOpened:!0,autoSleep:!0,onInit:null,onSubnavChange:null,onClose:null,onOpen:null,excludeFirstLevel:!0,setPositions:!1,setPositionsOnScroll:!0,setPositionsOnElement:!1,setPositionsOnDeactivation:!0,positionSkipOnFirstLevel:!0,firstLevelPositionsFromCenter:i.POSITIONS.DIRECTION.NONE,inheritPosition:i.POSITIONS.DIRECTION.BOTH,positionBase:i.POSITIONS.BASE.WINDOW,firstLevelPositionBase:i.POSITIONS.BASE.WINDOW,positionOffset:10,hideOverflow:!0,onResetPositionsStart:null,onResetPositionsEnd:null,allowSliding:!0,allowSlidingOnFirstLevel:!1,ignoreLayoutOnSliding:!1,slidingZone:75,mouseTolerance:1,minZoneExt:25,maxZoneExt:250,zoneExtOffset:0,surroundingZone:15,surroundingTimeout:600,outsideTimeout:400,insideTimeout:function(){switch(!0){case i.SUPPORT.IS_IE8:return 40;case i.SUPPORT.IS_IELTE7:return 50;default:return 30}}(),openTimeout:function(){switch(!0){case i.SUPPORT.IS_IE8:return 40;case i.SUPPORT.IS_IELTE7:return 50;default:return 30}}(),fading:i.FADING_TYPE.NONE,animation:"UXN-hide",waitForFading:!1,stopFadingOnHover:!0,isFadedOut:function(t,e,i){return"visibility"===e.propertyName},debug:!1},i.Debugger=null;var s=[],n=0,o=null,r={DOWN_RIGHT:1,DOWN_LEFT:2,UP_RIGHT:3,UP_LEFT:4,LEFT:5,RIGHT:6,UP:7,DOWN:8},a={},h={NO_DEBUGGER:"In minified versions of UXN the debugger is not available!"},l=["nav","item","opener","closer","subnav","openerOpened","itemOpened","subnavHasOpened","openerHighlighted","itemHighlighted","openerHasSubnav","itemHasSubnav","currentSubnav","noFading","openerHasFadingOut","itemHasFadingOut","subnavHasFadingOut"],u=t(),p=t([null]),f=t(window),c=t(document),v=t("html"),g=null,S=!1,O=null,d=0,m=c.width(),T=f.width(),I=f.height(),E=0,b=0,P=0,L=0,C=0,N=0,R=0,U=null,$=0,B=0,D=0,F=f.scrollLeft(),H=null,A=null,_=!1,y=!1,M=!1,G=null,w=function(){if(s.push(this),n++,this.initializing=!0,this.itemOpensSubnav=!this.opt.opener||this.opt.opener===this.opt.item,this.itemOpensSubnav&&(this.opt.opener=this.opt.item),this.sleeping=!1,this.touchSleeping=!1,this.$nav=t(this.opt.nav),i.U.addClass(this.$nav,this.opt.instance),this.$firstLevel=i.U.findFirst(this.$nav,this.opt.subnav),this.$waiting=u,this.$currentSubnav=u,this.$lastOpener=u,this.$lastItem=u,this.$currentTarget=u,this.$lastOpened=u,this.$lastOpenedSubnav=u,this.$currentSubnavInZone=u,this.$resetStartSubnav=u,this.resetRequestQueue=[],this.positionBase={},this.firstLevelPositionBase={},this.positionBaseLastScroll={y:0,x:0},this.firstLevelPositionBaseLastScroll={y:0,x:0},this.opt.positionBase!==i.POSITIONS.BASE.WINDOW?this.$positionBase=this.opt.positionBase===i.POSITIONS.BASE.PAGE?v:i.U.jQueryfy(this.opt.positionBase):this.$positionBase=u,we.call(this),this.opt.firstLevelPositionBase!==i.POSITIONS.BASE.WINDOW?this.$firstLevelPositionBase=this.opt.firstLevelPositionBase===i.POSITIONS.BASE.PAGE?v:i.U.jQueryfy(this.opt.firstLevelPositionBase):this.$firstLevelPositionBase=u,ke.call(this),this.fadingOuts=[],this.hasExcludeInsideClasses=!!i.U.findFirstByClass(this.$nav,this.opt.excludeInside).length,q.call(this),this.opt.debug&&i.Debugger.insertStylesForDebugging(this),W.call(this),this.opt.setPositions){var e=t.proxy(Q,this);e.$opener=this.$nav,ge.call(this,e,!1,!0)}else Q.call(this)},k=function(e){if(e){"string"==typeof e&&(e={nav:e}),void 0!==e.firstLevelPositionBase&&void 0===e.firstLevelPositionsFromCenter&&(e.firstLevelPositionsFromCenter=i.POSITIONS.DIRECTION.BOTH),void 0!==e.firstLevelPositionBase&&void 0===e.positionSkipOnFirstLevel&&(e.positionSkipOnFirstLevel=!1),void 0===e.firstLevelPositionBase&&void 0!==e.positionBase&&(e.firstLevelPositionBase=e.positionBase),(e.fading===i.FADING_TYPE.TRANSITION&&!i.SUPPORT.TRANSITIONEND||e.fading===i.FADING_TYPE.ANIMATION&&!i.SUPPORT.ANIMATIONEND)&&(e.fading=i.FADING_TYPE.NONE),e.fading===i.FADING_TYPE.NONE||i.VENDOR_PREFIXES||(e.fading===i.FADING_TYPE.TRANSITION&&i.SUPPORT.TRANSITION_PREFIX||e.fading===i.FADING_TYPE.ANIMATION&&i.SUPPORT.ANIMATION_PREFIX)&&(e.fading=i.FADING_TYPE.NONE);var s=0,n=l.length;for(s;n>s;s++)"string"==typeof e[l[s]]?e[l[s]]=t.trim(e[l[s]]):void 0!==e[l[s]]&&"nav"!==l[s]&&delete e[l[s]];if((e.closeOnlyInLevel||e.hideFollowing&&!e.closeOnlyInLevel&&this.opt&&this.opt.closeOnlyInLevel)&&(e.hideFollowing=!1),e.debug){if("object"!=typeof i.Debugger||null===i.Debugger)return e.debug=!1,void(console&&console.warn&&console.warn(i.Debugger?i.Debugger:h.NO_DEBUGGER));e.insideTimeout=(e.insideTimeout?e.insideTimeout:i.DEFAULTS.insideTimeout)*i.DEBUG.TIMEOUT_MULTIPLIER,e.openTimeout=(e.openTimeout?e.openTimeout:i.DEFAULTS.openTimeout)*i.DEBUG.TIMEOUT_MULTIPLIER}}},W=function(){var t=this.getAllOpeners(null,!1,!0),e=0,s=t.length;for(e;s>e;e++)if(p[0]=t[e],this.getSubnav(p).length)if(this.itemOpensSubnav)i.U.addClass(p,this.opt.itemHasSubnav);else{i.U.addClass(p,this.opt.openerHasSubnav);var n=this.getClosestItem(p);i.U.addClass(n,this.opt.itemHasSubnav)}},x=function(){var t=n-1;for(t;t>=0;t--)if(s[t]===this){s.splice(t,1);break}n--},X=function(){i.U.removeClass(this.$nav,this.opt.activeInstance,this.opt.instance);var t=this.getAllItems(null,!0,!0),e=0,s=t.length;for(e;s>e;e++)i.U.removeClass(t[e],this.opt.itemOpened,this.opt.itemHighlighted,this.opt.itemHasSubnav,this.opt.itemHasFadingOut,this.opt.itemHasTop,this.opt.itemHasLeft,this.opt.itemHasBottom,this.opt.itemHasRight);if(!this.itemOpensSubnav){var n=this.getAllOpeners(null,!0,!0),o=0,r=n.length;for(o;r>o;o++)i.U.removeClass(n[o],this.opt.openerOpened,this.opt.openerHighlighted,this.opt.openerHasSubnav,this.opt.openerHasFadingOut,this.opt.openerHasTop,this.opt.openerHasLeft,this.opt.openerHasBottom,this.opt.openerHasRight)}var a=this.getAllSubnavs(null,!0),h=0,l=a.length;for(h;l>h;h++)i.U.removeClass(a[h],this.opt.currentSubnav,this.opt.subnavTop,this.opt.subnavLeft,this.opt.subnavBottom,this.opt.subnavRight)},Z=function(){return i.SUPPORT.INSERT_TO_STYLE?function(){1===n?t("#"+i.POSITIONS.IDS.STYLE).remove():q.call(this,!0)}:function(){t("#"+i.POSITIONS.IDS.STYLE+"-"+this.id).remove()}}(),V=function(t){return"	"+this.opt.nav+" ."+i.POSITIONS.CLASSES.RESET+(t?" {\n":",\n")},Y=function(t){return"	"+this.opt.nav+" ."+i.POSITIONS.CLASSES.RESET+" "+this.opt.subnav+(t?" {\n":",\n")},q=function(){return i.SUPPORT.INSERT_TO_STYLE?function(e){var o=t("#"+i.POSITIONS.IDS.STYLE),r=0,a=!1,h="",l="";for(r;n>r;r++)if(!e||s[r]!==this){if(a=r===n-1||e&&s[r+1]===this,s[r].opt.hideOverflow){if(!a){a=!0;var u=r+1;for(u;n>u;u++)if(s[u].opt.hideOverflow){a=!1;break}}h+=V.call(s[r],a)}l+=Y.call(s[r],a)}var p=o.length?o:t("<style />"),f=h.length?["\n"+h,"		overflow: hidden !important;\n","	}\n","\n"+l]:["\n"+l];i.VENDOR_PREFIXES&&i.SUPPORT.TRANSITION_PREFIX&&f.push("		"+i.SUPPORT.TRANSITION_PREFIX+"transition: none !important;\n"),f.push("		transition: none !important;\n"),i.VENDOR_PREFIXES&&i.SUPPORT.ANIMATION_PREFIX&&f.push("		"+i.SUPPORT.ANIMATION_PREFIX+"animation-duration: 0s !important;\n"),f.push("		animation-duration: 0s !important;\n"),f.push("		visibility: hidden !important;\n"),f.push("	}\n"),p.text(f.join("")),o.length||(p[0].id=i.POSITIONS.IDS.STYLE,p.appendTo("head"))}:function(){var e="<style id='"+i.POSITIONS.IDS.STYLE+"-"+this.id+"'>";e+=["\n"+V.call(this,!0),this.opt.hideOverflow?"		overflow: hidden !important;\n":"","	}\n","\n"+Y.call(this,!0),"		visibility: hidden !important;\n","	}\n"].join(""),e+="</style>";var s=t("head");s.html(s.html()+e)}}(),z=function(){return i.MULTIPLE_INSTANCES?(i.U.addClass(this.$nav,this.opt.activeInstance),this.on=!0,this.positionChangedWhileOn=!1,o=this,!0):o===this?!0:o?!1:(o=this,i.U.addClass(this.$nav,this.opt.activeInstance),this.on=!0,this.positionChangedWhileOn=!1,!0)},j=function(){if(i.MULTIPLE_INSTANCES){if(this.inside)return;if((!this.opt.doNotCloseFirstLevel&&!this.hasFirstLevelOpenedSubnav()||this.opt.doNotCloseFirstLevel&&1===this.getOpenedItemsInSubnav(this.$firstLevel).length)&&(this.opt.waitForFading||i.U.removeClass(this.$nav,this.opt.activeInstance),et.call(this,u),this.inTriangleZoneCounter=null,this.inSurroundingZoneCounter=null,this.on=!1),this.on)return;if(this.isAnySubnavFading())return;return this.opt.waitForFading&&i.U.removeClass(this.$nav,this.opt.activeInstance),void(this.opt.setPositions&&this.opt.setPositionsOnDeactivation&&this.positionChangedWhileOn&&(this.ignoreChangeOnReset=!0,de.call(this)))}o&&o!==this||this.inside||(this.opt.doNotCloseFirstLevel||!this.hasFirstLevelOpenedSubnav())&&(this.opt.doNotCloseFirstLevel&&this.getOpenedItemsInSubnav(this.$firstLevel).length>1||this.opt.waitForFading&&this.isAnySubnavFading()||(o=null,this.inTriangleZoneCounter=null,this.inSurroundingZoneCounter=null,this.on=!1,et.call(this,u),i.U.removeClass(this.$nav,this.opt.activeInstance),this.opt.setPositions&&this.opt.setPositionsOnDeactivation&&this.positionChangedWhileOn&&(this.ignoreChangeOnReset=!0,de.call(this))))},Q=function(){S||(U=r.DOWN_RIGHT,B=f.scrollLeft(),c.on("touchend."+i.EVENT_NS,Tt).on("click."+i.EVENT_NS,st).on("touchstart."+i.EVENT_NS,dt).on("touchmove."+i.EVENT_NS,mt).on("mousemove."+i.EVENT_NS,It),f.on("scroll."+i.EVENT_NS,pt).on("resize."+i.EVENT_NS,lt),O=setInterval(ot,i.EVENT_TIMERS.INTERVAL),S=!0),this.opt.setPositionsOnScroll&&(this.opt.positionBase!==i.POSITIONS.BASE.WINDOW&&this.$positionBase.on("scroll."+i.EVENT_NS,t.proxy(ft,this,!0)),this.opt.firstlevelPositionBase!==i.POSITIONS.BASE.WINDOW&&this.$firstLevelPositionBase.on("scroll."+i.EVENT_NS,t.proxy(ft,this,!0))),"function"==typeof this.opt.onInit&&this.opt.onInit.call(this),this.initializing=!1,this.settingPositionsOnFirstLevelInProgress=!1},K=function(){1===n&&(c.off("."+i.EVENT_NS),f.off("."+i.EVENT_NS),clearInterval(O),S=!1),this.$positionBase.off("scroll."+i.EVENT_NS),this.$firstLevelPositionBase.off("scroll."+i.EVENT_NS)},J=function(){this.opt.autoSleep&&(this.isNavInsideViewport()?this.wake():this.on||this.isAnySubnavFading()||this.sleep(!0))},tt=function(t){var e=this.getClosestOpener(t),s=this.itemOpensSubnav?e:this.getClosestItem(t),n=this.getClosestSubnav(t),o=!1;return this.opt.debug&&i.U.closest(t,"."+i.DEBUG.CLASSES.SVG).length&&(e=u,s=u,n=u,o=!0),this.$realCurrentTarget=t,this.$currentTarget=e.length?e:t,this.$currentOpener=e.length?e:u,this.$currentItem=s,this.inside=i.U.hasParent(this.$nav[0],this.$currentTarget[0])&&!o,this.inside||this.$nav[0]!==this.$currentTarget[0]||(this.inside=!0),et.call(this,n.length?n:this.$currentSubnav||u),this.$currentSubnav.length&&this.hasSubnavOpenedSubnav(this.$currentSubnav)&&(this.$lastOpened=this.getOpenedOpenersInSubnav(this.$currentSubnav).first(),this.$lastOpenedSubnav=this.$lastOpened.length?this.getSubnav(this.$lastOpened):u),{$opener:e,$item:s,$subnav:n}},et=function(t){!this.inside&&t.length||this.$currentSubnav[0]===t[0]||(this.$currentSubnav.length&&i.U.removeClass(this.$currentSubnav,this.opt.currentSubnav),"function"==typeof this.opt.onSubnavChange&&this.opt.onSubnavChange.call(this,t,this.$currentSubnav),this.$currentSubnav=t,t.length&&(i.U.addClass(this.$currentSubnav,this.opt.currentSubnav),this.positionChangedWhileOn&&Ie.call(this)))},it=function(e){var s=tt.call(this,e),n=s.$opener.length&&this.hasOpenerSubnav(s.$opener);if(this.inside&&Pt.call(this,e))return s.$opener.length&&n&&(this.preventClickDefault=this.opt.preventClickOnTouch),this.touchendRepeater=setTimeout(t.proxy(function(){it.call(this,e)},this),i.EVENT_TIMERS.REPEATER),!0;var o=!1;return this.inside&&this.itemOpensSubnav&&s.$opener.length&&(n?this.preventClickDefault=this.opt.preventClickOnTouch:o=!0),this.inside&&!i.U.hasParent(s.$subnav[0],s.$opener[0])&&(o=!0),s.$opener.length&&this.inside?!this.inside||this.on||z.call(this)?!this.hasOpenerOpenedSubnav(s.$opener)||this.isAnySubnavFading()&&this.isInFadingSubnav(e)?(this.$lastOpener.length&&this.$lastOpener[0]!==s.$opener[0]&&Bt.call(this,s.$opener,s.$subnav),yt.call(this,s.$opener,s.$item,null,!0),o&&!this.preventClickDefault&&(this.closeOnClickByTouch=!0),n||(j.call(this),this.$lastOpened=u,this.$lastOpener=u),this.$lastOpener=s.$opener,this.$lastItem=s.$item,this.on):(this.$lastOpener.length&&Bt.call(this,s.$subnav,s.$subnav),o&&(this.closeOnClickByTouch=!0,this.preventClickDefault=!1),this.$lastOpener=s.$opener,this.$lastItem=s.$item,this.hasFirstLevelOpenedSubnav()||(j.call(this),this.$lastOpened=u,this.$lastOpener=u),this.on):(g=this,!1):(this.$lastOpener.length&&Bt.call(this,e,s.$subnav),this.$lastOpener=u,this.$lastItem=u,this.$lastOpened=u,j.call(this),!1)},st=function(e){var i=t(e.target),o=0;for(o;n>o;o++)s[o].initializing||s[o].sleeping&&!y||s[o].touchSleeping||nt.call(s[o],i)&&e.preventDefault();_=!1,y=!1},nt=function(t){if(y&&"a"===t[0].tagName.toLowerCase()&&(this.on&&this.inside||i.U.hasParent(this.$nav[0],t[0]))&&(!this.$currentSubnav.length||this.getClosestSubnav(t)[0]!==this.$currentSubnav[0]||t[0]!==this.$realCurrentTarget[0]&&!i.U.hasParent(this.$realCurrentTarget[0],t[0])&&!i.U.hasParent(t[0],this.$realCurrentTarget[0])))return!0;if(this.on&&this.inside&&this.opt.preventClickOnTouch&&!this.preventClickDefault){var e=this.getClosestOpener(t);e.length&&this.hasOpenerSubnav(t)&&i.U.hasParent(this.$currentSubnav[0],this.$currentOpener[0])&&(this.preventClickDefault=!0)}return(this.opt.closeOnClick&&!_||!this.inside)&&(this.isClosingByClick=this.inside,Dt.call(this,null)),this.opt.closeOnClick&&this.closeOnClickByTouch&&(this.closeOnClickByTouch=!1,Dt.call(this,null)),this.preventClickDefault&&y?(this.preventClickDefault=!1,!0):(!this.opt.closeOnClick&&this.shouldCloseNav(t)&&(this.isClosingByClick=!0,Dt.call(this,null)),!1)},ot=function(){var t=0;for(t;n>t;t++)s[t].sleeping||s[t].initializing||(this.lastIntervalInstance=s[t],J.call(s[t]),rt.call(s[t]),at.call(s[t]))},rt=function(){this.opt.debug&&!this.hasFirstLevelOpenedSubnav()&&i.Debugger.clearDebug(this)},at=function(){if(this.opt.setPositions&&this.opt.setPositionsOnElement){var e=!1,s=we.call(this,!0);if(this.$positionBase.length&&this.opt.positionBase!==i.POSITIONS.BASE.WINDOW&&(s=i.U.getRect(this.$positionBase),e=ht.call(this,s,this.positionBase)),!e&&this.$firstLevelPositionBase.length&&this.opt.firstLevelPositionBase!==this.opt.positionBase&&this.opt.firstLevelPositionBase!==i.POSITIONS.BASE.WINDOW&&(!this.$positionBase.length||this.$positionBase[0]!==this.$firstLevelPositionBase[0])){var n=ke.call(this,!0);e=ht.call(this,n,this.firstLevelPositionBase),this.firstLevelPositionBase=n}e&&(clearTimeout(this.elementSizeTimeout),this.elementSizeTimeout=setTimeout(t.proxy(function(){this.lastIntervalInstance===this&&clearTimeout(G),clearTimeout(this.scrollTimeout),Ee.call(this)},this),i.EVENT_TIMERS.ELEMENT_SIZE)),this.positionBase=s}},ht=function(t,e){return e&&(t.height!==e.height||t.width!==e.width)},lt=function(){clearTimeout(G),G=setTimeout(function(){var t=0;for(t;n>t;t++)J.call(s[t]),s[t].sleeping||s[t].initializing||ut.call(s[t]);G=null},i.EVENT_TIMERS.RESIZE),T=f.width(),I=f.height()},ut=function(){this.opt.setPositions&&(clearTimeout(this.scrollTimeout),de.call(this))},pt=function(){$=1,H=vt(),A=gt();var t=0;for(t;n>t;t++)J.call(s[t]),s[t].sleeping||s[t].initializing||(this.lastScrollInstance=s[t],ft.call(s[t]));B=f.scrollLeft(),D=f.scrollTop()},ft=function(e,s){var n,o;if(e&&(n=t(s.target),o=s.target===this.$positionBase[0]?this.positionBaseLastScroll:this.firstLevelPositionBaseLastScroll,this.horizontalScrollDirection=St.call(this,n,o),this.verticalScrollDirection=Ot.call(this,n,o),J.call(this),$=1),(H||A||this.horizontalScrollDirection||this.verticalScrollDirection)&&(this.positionChangedWhileOn=!0),this.opt.setPositions&&this.opt.setPositionsOnScroll){clearTimeout(this.scrollTimeout);var r=this.inside?i.EVENT_TIMERS.SCROLL_INSIDE:i.EVENT_TIMERS.SCROLL;y&&(r=i.EVENT_TIMERS.SCROLL_TOUCH),this.scrollTimeout=setTimeout(t.proxy(ct,this,E,b),r),e&&(o.x=n.scrollLeft(),o.y=n.scrollTop())}},ct=function(e,s){return this.resetOnScrollRequestActivated=!1,clearTimeout(this.scrollTimeout),e!==E||s!==b||this.inside?(this.resetOnScrollRequest=null,clearTimeout(G),(this.$currentSubnav.length||this.isNavInsideViewport())&&Ee.call(this),this.scrollTimeout=null,this.horizontalScrollDirection=null,this.verticalScrollDirection=null,void(this.lastScrollInstance===this&&(H=null,A=null))):(this.resetOnScrollRequest=t.proxy(ct,this,-1,-1),void(this.scrollTimeout=setTimeout(this.resetOnScrollRequest,i.EVENT_TIMERS.SCROLL_NEXT)))},vt=function(){var t=f.scrollLeft();switch(!0){case B>t:return r.LEFT;case t>B:return r.RIGHT;default:return null}},gt=function(){var t=f.scrollTop();switch(!0){case D>t:return r.UP;case t>D:return r.DOWN;default:return null}},St=function(t,e){var i=t.scrollLeft();switch(!0){case e.x>i:return r.LEFT;case e.x<i:return r.RIGHT;default:return null}},Ot=function(t,e){var i=t.scrollTop();switch(!0){case e.y>i:return r.UP;case e.y<i:return r.DOWN;default:return null}},dt=function(){clearTimeout(this.touchendRepeater),_=!0,y=!0},mt=function(){M=!0},Tt=function(e){if(M)return M=!1,!1;var o=0,r=t(e.target);for(o;n>o&&(s[o].initializing||s[o].touchSleeping||!it.call(s[o],r)||i.MULTIPLE_INSTANCES);o++);g&&(it.call(g,r),g=null)},It=function(e){if(i.SKIP_MOUSE_EVENTS){if(d<i.SKIP_MOUSE_EVENTS)return void d++;d=0}if(!y){b=e.clientY,E=e.clientX,Nt(),R=Ct();var r=0;if("object"==typeof i.Debugger&&null!==i.Debugger)for(r;n>r;r++)s[r].opt.debug&&i.Debugger.clearDebug(s[r]);if(Lt())return void Et();var a=t(e.target);if(i.MULTIPLE_INSTANCES||!o||o.sleeping||o.initializing)for(r=0;n>r&&(s[r].sleeping||s[r].initializing||!bt.call(s[r],a)||i.MULTIPLE_INSTANCES);r++);else bt.call(o,a);Et()}},Et=function(){U=R,P=E,L=b},bt=function(e){if(clearTimeout(this.mousemoveRepeater),this.on||!i.U.hasParent(this.$nav[0],e[0])&&this.$nav[0]!==e[0]||z.call(this),!this.resetOnScrollRequestActivated&&this.resetOnScrollRequest)return this.resetOnScrollRequestActivated=!0,void setTimeout(this.resetOnScrollRequest,0);if(!this.on)return clearTimeout(this.inZoneTimeout),!1;if(Pt.call(this,e))return clearTimeout(this.inZoneTimeout),this.mousemoveRepeater=setTimeout(t.proxy(function(){bt.call(this,e)},this),i.EVENT_TIMERS.REPEATER),!1;var s=tt.call(this,e);return wt.call(this),Rt.call(this,this.$currentTarget,s.$subnav,this),this.inside&&(s.$opener.length||s.$subnav.length||s.$item.length)?this.$lastOpener[0]===s.$opener[0]&&this.$lastItem[0]===s.$item[0]?(this.mouseEnterThrottle&&Mt.call(this),!0):(this.$lastOpener[0]===s.$opener[0]&&this.$lastItem[0]===s.$item[0]||this.opt.delayHide||Bt.call(this,s.$opener,s.$subnav),Mt.call(this),this.$lastOpener=s.$opener.length?s.$opener:this.itemOpensSubnav?s.$item:u,this.$lastItem=s.$item,!0):(this.$lastOpener.length&&Bt.call(this),this.$lastOpener=u,this.$lastItem=u,this.hasFirstLevelOpenedSubnav()||(this.$lastOpened=u,this.$waiting=u),this.opt.doNotCloseFirstLevel&&!this.inZoneTimeout&&1===this.getOpenedItemsInSubnav(this.$firstLevel).length&&(this.$waiting=u),this.$waiting.length||this.inside||(j.call(this),et.call(this,u)),this.on)},Pt=function(t){return this.$resetStartSubnav.length&&this.getClosestSubnav(t)[0]===this.$resetStartSubnav[0]||this.settingPositionsOnFirstLevelInProgress&&this.getClosestSubnav(t)[0]===this.$firstLevel[0]||this.settingPositionsOnCurrentLevelInProgress&&this.getClosestSubnav(t)[0]===this.$resetStartSubnav[0]||this.settingPositionsOnLastOpenedLevelInProgress&&this.getClosestSubnav(t)[0]===this.$lastOpenedSubnav[0]},Lt=function(){if($){if(3!==$++)return!0;$=null}return!1},Ct=function(){switch(!0){case E-P>0&&b-L>0:return r.DOWN_RIGHT;case 0>E-P&&b-L>0:return r.DOWN_LEFT;case E-P>0&&0>b-L:return r.UP_RIGHT;case 0>E-P&&0>b-L:return r.UP_LEFT;case!N&&0>b-L:return U===r.UP_LEFT||U===r.UP_RIGHT?U:r.UP_RIGHT;case!N&&b-L>0:return U===r.DOWN_LEFT||U===r.DOWN_RIGHT?U:r.DOWN_RIGHT;case!C&&E-P>0:return U===r.UP_RIGHT||U===r.DOWN_RIGHT?U:r.DOWN_RIGHT;case!C&&0>E-P:return U===r.UP_LEFT||U===r.DOWN_LEFT?U:r.DOWN_LEFT;default:return U}},Nt=function(){C=Math.abs(b-L),N=Math.abs(E-P)},Rt=function(t,e,s){if(this.$lastOpened.length){if(this.inside?this.inTriangleZoneCounter=null:this.$currentSubnavInZone=u,ee.call(this))return clearTimeout(this.inZoneTimeout),this.$currentSubnavInZone=this.inside?this.$lastOpenedSubnav:u,this.inTriangleZoneCounter=0,this.$waiting=this.$lastOpenedSubnav,this.blockHiding=!0,this.opt.autoHide||this.inside?void(this.inZoneTimeout=setTimeout(function(){$t.call(s,t,e)},Ut.call(this))):void(this.inZoneTimeout=null);this.inside||this.inTriangleZoneCounter||(this.inTriangleZoneCounter=0),null===this.inSurroundingZoneCounter||this.inside||this.inSurroundingZoneCounter++,null===this.inTriangleZoneCounter||this.inSurroundingZoneCounter||this.inTriangleZoneCounter++,!this.inside&&(this.inTriangleZoneCounter>i.MAX_EVENTS.OUT_OF_TRIANGLE||this.inSurroundingZoneCounter>i.MAX_EVENTS.OUT_OF_SURROUNDING)&&(clearTimeout(this.inZoneTimeout),Bt.call(this)),this.inside&&this.$currentSubnav[0]!==this.$currentSubnavInZone[0]&&(clearTimeout(this.inZoneTimeout),$t.call(this,t,e)),this.blockHiding=!1}},Ut=function(){var t=this.inside?this.opt.insideTimeout:this.opt.outsideTimeout;return null!==this.inSurroundingZoneCounter?this.opt.surroundingTimeout:t},$t=function(t,e){this.blockHiding=!1,this.opt.delayHide||Dt.call(this,t,e),this.$waiting=u,Mt.call(this),this.inZoneTimeout=null,this.inSurroundingZoneCounter=null},Bt=function(t,e){return this.blockHiding?!1:(clearTimeout(this.inZoneTimeout),this.inZoneTimeout=null,this.$waiting=u,void Dt.call(this,t,e))},Dt=function(t,e,i){return this.inside&&t&&t.length?void(e.length&&At.call(this,e,t,!1,i)&&Ft.call(this)):(Ht.call(this,i),void Ft.call(this,!0))},Ft=function(t){return this.hasFirstLevelOpenedSubnav()?t?void j.call(this):this.$currentOpener.length&&this.hasOpenerOpenedSubnav(this.$currentOpener)?(this.$lastOpened=this.$currentOpener,void(this.$lastOpenedSubnav=this.getSubnav(this.$currentOpener))):(this.$lastOpened=this.$currentSubnav.length?this.getClosestOpener(this.$currentSubnav):u,void(this.$lastOpenedSubnav=this.$currentSubnav)):(this.$waiting=u,this.$lastOpened=u,void(this.$lastOpenedSubnav=u))},Ht=function(e){var r,s=this.opt.closeOnlyInLevel?this.getOpenedOpenersInSubnav(this.$firstLevel):this.getOpenedOpeners(),n=0,o=s.length;for(n;o>n;n++)r=t(s[n]),(!this.opt.keepOpened||!_t.call(this)||this.getClosestSubnav(r)[0]!==this.$currentSubnav[0]||y||!this.itemOpensSubnav&&this.$currentItem.length&&i.U.hasParent(this.$currentSubnav[0],this.$currentItem[0]))&&(this.opt.setPositions&&Pe.call(this,r)&&be.call(this,null,!0),!e&&this.opt.doNotCloseFirstLevel&&this.isInFirstLevel(r)||Zt.call(this,r))},At=function(e,s,n,o){var u,r=!1,a=this.opt.closeOnlyInLevel?this.getOpenedOpenersInSubnav(e):this.getOpenedOpeners(e),h=0,l=a.length;for(h;l>h;h++)this.$waiting[0]&&a[h]===s[0]||(u=t(a[h]),(!this.opt.closeOnlyInLevel||this.hasOpenerOpenedSubnav(u))&&(!this.opt.keepOpened||!_t.call(this)||this.getClosestSubnav(u)[0]!==e[0]||!this.itemOpensSubnav&&this.$currentItem.length&&i.U.hasParent(e[0],this.$currentItem[0]))&&(!this.opt.doNotCloseFirstLevel||o||n||!this.isInFirstLevel(u)||1!==this.getOpenedItemsInSubnav(this.$firstLevel).length)&&a[h]!==s[0]&&(this.opt.setPositions&&Pe.call(this,u)&&be.call(this,null,!0),Zt.call(this,u)&&(r=!0)));return r},_t=function(){return this.inside&&this.$currentSubnav.length&&(!this.$currentOpener.length||!i.U.hasParent(this.$currentSubnav[0],this.$currentOpener[0]))},yt=function(t,e,i,s){this.inside&&t.length&&(s&&this.isAnySubnavFading()&&this.isInFadingSubnav(t)&&(Qt.call(this),this.preventClickDefault=!0),kt.call(this,t,e,!1,null,i))},Mt=function(){return clearTimeout(this.mouseEnterThrottle),this.isAnySubnavFading()&&this.isInFadingSubnav(this.$currentTarget)&&(Qt.call(this),this.preventClickDefault=!0,this.mouseEnterTimeout=0),this.mouseEnterTimeout?void(this.mouseEnterThrottle=setTimeout(t.proxy(Gt,this),this.mouseEnterTimeout)):(Gt.call(this),void(this.mouseEnterThrottle=null))},Gt=function(){if(this.opt.delayHide){var e=t.proxy(Bt,this,this.$currentTarget,this.$currentSubnav);return yt.call(this,this.$currentTarget,this.$currentItem,e),this.inside||e(),void(this.mouseEnterThrottle=null)}yt.call(this,this.$currentTarget,this.$currentItem),this.mouseEnterThrottle=null},wt=function(){if(this.inside&&this.$currentSubnav.length){var t=i.U.hasClass(this.$currentSubnav,this.opt.slidingVertical),e=t||this.isSubnavHorizontal(this.$currentSubnav),s=i.U.hasClass(this.$currentSubnav,this.opt.slidingHorizontal),n=e&&s&&t||this.opt.ignoreLayoutOnSliding;return s&&(e=t),this.opt.allowSliding?n?void(!this.opt.allowSlidingOnFirstLevel&&Ze.call(this)?this.mouseEnterTimeout=this.opt.openTimeout:this.mouseEnterTimeout=0):this.opt.allowSlidingOnFirstLevel?Ze.call(this)?(e?this.mouseEnterTimeout=N>-1&&2>C||N>0&&7>C||N>2&&20>C?this.opt.openTimeout:0:this.mouseEnterTimeout=C>-1&&2>N||C>0&&7>N||C>2&&20>N?this.opt.openTimeout:0,void(pe.call(this,e)&&(this.mouseEnterTimeout=this.opt.openTimeout))):(e?this.mouseEnterTimeout=N>-1&&2>C||N>2&&20>C?this.opt.openTimeout:0:this.mouseEnterTimeout=C>-1&&2>N||C>2&&20>N?this.opt.openTimeout:0,void(pe.call(this,e)&&(this.mouseEnterTimeout=this.opt.openTimeout))):Ze.call(this)?void(this.mouseEnterTimeout=this.opt.openTimeout):(e?this.mouseEnterTimeout=N>-1&&2>C||N>2&&20>C?this.opt.openTimeout:0:this.mouseEnterTimeout=C>-1&&2>N||C>2&&20>N?this.opt.openTimeout:0,void(pe.call(this,e)&&(this.mouseEnterTimeout=this.opt.openTimeout))):void(this.mouseEnterTimeout=this.opt.openTimeout);
}},kt=function(t,e,s,n,o,r){if((s||xt.call(this,t,e))&&(this.inside&&(!this.$waiting.length||i.U.hasParent(this.$waiting[0],t[0]))||r)){if(this.opt.setPositions&&!s)return void me.call(this,t,e,o);if(o&&o(),s&&t[0]!==this.$currentOpener[0])return;(this.opt.closeOnlyInLevel&&(n||this.$currentSubnav).length&&this.hasSubnavOpenedSubnav(n||this.$currentSubnav)||this.opt.doNotCloseFirstLevel&&Ze.call(this)&&1===this.getOpenedItemsInSubnav(this.$firstLevel).length)&&At.call(this,n||this.$currentSubnav,t,!0),this.on&&Xt.call(this,t,e,n||this.$currentSubnav)!==!1?Wt.call(this,t):this.on||(this.$lastOpener=u,Wt.call(this,u))}},Wt=function(t){this.$lastOpened=t,this.$lastOpenedSubnav=this.$lastOpened.length?this.getSubnav(t):u,this.opt.closeOnlyInLevel&&this.$lastOpenedSubnav.length&&this.hasSubnavOpenedSubnav(this.$lastOpenedSubnav)&&(this.$lastOpened=this.getOpenedOpenersInSubnav(this.$lastOpenedSubnav).first(),this.$lastOpenedSubnav=this.getSubnav(this.$lastOpened))},xt=function(t,e){return this.itemOpensSubnav||i.U.hasParent(e[0],t[0])?this.$lastOpened[0]!==t[0]&&this.hasOpenerSubnav(t):!1},Xt=function(t,e,s){if(ye.call(this,t))return!1;if(s=s&&s.length?s:this.getClosestSubnav(t),this.hasOpenerSubnav(t)&&!this.hasOpenerOpenedSubnav(t)){var n=this.getSubnav(t);return e=e&&e.length?e:this.getClosestItem(t),"function"==typeof this.opt.onOpen&&this.opt.onOpen.call(this,n,t,e)===!1?!1:(this.itemOpensSubnav?(i.U.addClass(t,this.opt.itemOpened,this.opt.itemHighlighted),i.U.findFirstByClass(s,this.opt.itemOpened).length&&i.U.addClass(s,this.opt.subnavHasOpened)):(i.U.addClass(t,this.opt.openerOpened,this.opt.openerHighlighted),i.U.addClass(e,this.opt.itemOpened,this.opt.itemHighlighted),i.U.findFirstByClass(s,this.opt.openerOpened).length&&i.U.addClass(s,this.opt.subnavHasOpened)),this.opt.fading===i.FADING_TYPE.NONE||i.U.hasClass(n,this.opt.noFading)||Vt.call(this,t,e,n,s),!0)}return!1},Zt=function(e,s,n,o){if(ye.call(this,e))return!1;if(n=n&&n.length?n:this.getClosestSubnav(e),this.hasOpenerSubnav(e)&&this.hasOpenerOpenedSubnav(e)){var r=this.getSubnav(e);s=s&&s.length?s:this.getClosestItem(e);var h=t.proxy(Yt,this,e,s,r,n,null);return"function"==typeof this.opt.onClose&&this.opt.onClose.call(this,r,e,s,h)===!1?!1:(this.itemOpensSubnav?i.U.removeClass(e,this.opt.itemOpened,this.opt.itemHighlighted):(i.U.removeClass(e,this.opt.openerOpened,this.opt.openerHighlighted),i.U.removeClass(s,this.opt.itemOpened,this.opt.itemHighlighted)),o||this.isSiblingOpenerOpened(e,n)||i.U.removeClass(n,this.opt.subnavHasOpened),this.opt.fading===i.FADING_TYPE.NONE||i.U.hasClass(r,this.opt.noFading)?r.data(a.RESET_SKIPPED)&&Te.call(this,e,r,n):(this.fadingOuts.push(r),this.opt.fading!==i.FADING_TYPE.JS&&r.on(zt.call(this),t.proxy(Yt,this,e,s,r,n,h)),this.itemOpensSubnav?i.U.addClass(e,this.opt.itemHasFadingOut):(i.U.addClass(e,this.opt.openerHasFadingOut),i.U.addClass(s,this.opt.itemHasFadingOut)),o||i.U.addClass(n,this.opt.subnavHasFadingOut)),!0)}return!1},Vt=function(t,e,s,n){this.itemOpensSubnav?i.U.removeClass(t,this.opt.itemHasFadingOut):(i.U.removeClass(t,this.opt.openerHasFadingOut),i.U.removeClass(e,this.opt.itemHasFadingOut)),this.isSiblingOpenerFadingOut(t,n)||i.U.removeClass(n,this.opt.subnavHasFadingOut),this.opt.fading!==i.FADING_TYPE.JS&&s.off(zt.call(this)),jt.call(this,s),s.data(a.RESET_SKIPPED)&&Te.call(this,t,s,n)},Yt=function(t,e,i,s,n,o){o&&o.originalEvent.target!==i[0]||(qt.call(this,t,i,o?o.originalEvent:null,n)&&Vt.call(this,t,e,i,s),this.fadingOuts.length||this.inside&&this.isClosingByClick||j.call(this),this.fadingOuts.length||(this.isClosingByClick=!1))},qt=function(e,s,n,o){var r=this.hasOpenerFadingSubnav(e);return r&&this.opt.fading===i.FADING_TYPE.TRANSITION&&n?this.opt.isFadedOut.call(this,s,n,o):r&&this.opt.fading===i.FADING_TYPE.ANIMATION?this.opt.animation===n.animationName||-1!==t.inArray(n.animationName,t.isArray(this.opt.animation)?this.opt.animation:[]):r},zt=function(){switch(this.opt.fading){case i.FADING_TYPE.ANIMATION:return i.SUPPORT.ANIMATIONEND+"."+i.EVENT_NS;case i.FADING_TYPE.TRANSITION:return i.SUPPORT.TRANSITIONEND+"."+i.EVENT_NS;default:return"UnknownEventType"}},jt=function(t){var e=this.fadingOuts.length-1;for(e;e>=0;e--)if(this.fadingOuts[e][0]===t[0]){this.fadingOuts.splice(e,1);break}},Qt=function(){if(!this.isClosingByClick&&this.opt.stopFadingOnHover&&this.$currentSubnav.length){var e=this.opt.closeOnlyInLevel?i.U.closest(this.$currentTarget,this.opt.item+"."+this.opt.itemHasSubnav+":not(."+this.opt.itemOpened+")"):this.$currentSubnav;if(this.opt.closeOnlyInLevel&&(e=e.length?this.getSubnav(e):this.$currentSubnav),e.length)for(this.$lastOpenedSubnav=this.$currentSubnav,this.$lastOpened=this.getClosestOpener(this.$lastOpenedSubnav);e.length;){var s=this.getClosestOpener(e);if(!s.length||this.hasOpenerOpenedSubnav(s)&&!this.opt.closeOnlyInLevel)e=u;else{var n=this.getClosestSubnav(s),o=this.getItemsInSubnav(n),r=o.length,a=0;for(a;r>a;a++){var h=t(o[a]),l=this.itemOpensSubnav?h:this.getOpener(h);if(l.length&&l[0]!==s[0]){if(Zt.call(this,l,h,n),this.opt.closeOnlyInLevel)continue;var p=this.getOpenedOpeners(l),f=0,c=p.length;for(f;c>f;f++)Zt.call(this,t(p[f]))}}Xt.call(this,s),e=this.getClosestSubnav(s)}}}},Kt=function(t){if(!this.inside){var e=t.left-this.opt.surroundingZone,s=t.right+this.opt.surroundingZone,n=t.top-this.opt.surroundingZone,o=t.bottom+this.opt.surroundingZone;if(ce.call(this,E,b,n,e,o,s))return this.opt.debug&&i.Debugger.debugRectangle(this,n,e,o,s),!0}return!1},Jt=function(t,e){t.push({subnav:e[0],rect:i.U.getRect(e),skip:ie.call(this,e)})},te=function(){var t=this.getOpenedSubnavs(null,this.opt.closeOnlyInLevel),e=[],i=!1,s=t.length-1;for(s;s>=0;s--)t[s]===this.$lastOpenedSubnav[0]&&(i=!0),p[0]=t[s],Jt.call(this,e,p);return i||Jt.call(this,e,this.$lastOpenedSubnav),e},ee=function(){var t=te.call(this),e=ne.call(this,t);if(!N&&!e)switch(R){case r.UP_LEFT:if(ne.call(this,t,r.UP_RIGHT,i.DEBUG&&i.DEBUG.COLORS.ALT_TRIANGLE)){if(!this.opt.debug)return!0;e=!0}break;case r.DOWN_LEFT:if(ne.call(this,t,r.UP_RIGHT,i.DEBUG&&i.DEBUG.COLORS.ALT_TRIANGLE)){if(!this.opt.debug)return!0;e=!0}break;case r.UP_RIGHT:if(ne.call(this,t,r.UP_LEFT,i.DEBUG&&i.DEBUG.COLORS.ALT_TRIANGLE)){if(!this.opt.debug)return!0;e=!0}break;default:if(ne.call(this,t,r.DOWN_LEFT,i.DEBUG&&i.DEBUG.COLORS.ALT_TRIANGLE)){if(!this.opt.debug)return!0;e=!0}}if(!C&&!e)switch(R){case r.UP_LEFT:if(ne.call(this,t,r.DOWN_LEFT,i.DEBUG&&i.DEBUG.COLORS.ALT_TRIANGLE)){if(!this.opt.debug)return!0;e=!0}break;case r.DOWN_LEFT:if(ne.call(this,t,r.UP_LEFT,i.DEBUG&&i.DEBUG.COLORS.ALT_TRIANGLE)){if(!this.opt.debug)return!0;e=!0}break;case r.UP_RIGHT:if(ne.call(this,t,r.DOWN_RIGHT,i.DEBUG&&i.DEBUG.COLORS.ALT_TRIANGLE)){if(!this.opt.debug)return!0;e=!0}break;default:if(ne.call(this,t,r.UP_RIGHT,i.DEBUG&&i.DEBUG.COLORS.ALT_TRIANGLE)){if(!this.opt.debug)return!0;e=!0}}return e},ie=function(t){return se.call(this,t)||this.opt.hideFollowing&&this.inside&&!i.U.hasParent(this.$currentSubnav[0],t[0])},se=function(t){return this.opt.excludeFirstLevel&&t[0]===this.$firstLevel[0]||i.U.hasClass(t,this.opt.exclude)||this.hasExcludeInsideClasses&&i.U.hasClass(t,this.opt.excludeInside)&&(this.$currentSubnav[0]===t[0]||i.U.hasParent(t[0],this.$currentSubnav[0]))},ne=function(t,e,s){var o,a,h,n=!1,l=0,u=t.length;for(l;u>l;l++){if(!e&&t[l].subnav!==this.$firstLevel[0]&&Kt.call(this,t[l].rect)){if(this.inSurroundingZoneCounter=0,!this.opt.debug)return!0;n=!0}if(!t[l].skip){if(o=oe.call(this,t[l].subnav,t[l].rect,e),h=o,this.opt.debug&&o&&i.Debugger.debugTriangle(this,h[0],h[1],h[2],h[3],h[4],h[5],s),a=o&&le(E,b,h[0],h[1],h[2],h[3],h[4],h[5]),o&&!a&&this.opt.mouseTolerance>0)switch(R){case r.UP_LEFT:a=le(E-this.opt.mouseTolerance,b-this.opt.mouseTolerance,h[0],h[1],h[2],h[3],h[4],h[5])||le(E,b-this.opt.mouseTolerance,h[0],h[1],h[2],h[3],h[4],h[5])||le(E-this.opt.mouseTolerance,b,h[0],h[1],h[2],h[3],h[4],h[5]);break;case r.DOWN_LEFT:a=le(E-this.opt.mouseTolerance,b+this.opt.mouseTolerance,h[0],h[1],h[2],h[3],h[4],h[5])||le(E,b+this.opt.mouseTolerance,h[0],h[1],h[2],h[3],h[4],h[5])||le(E-this.opt.mouseTolerance,b,h[0],h[1],h[2],h[3],h[4],h[5]);break;case r.UP_RIGHT:a=le(E+this.opt.mouseTolerance,b-this.opt.mouseTolerance,h[0],h[1],h[2],h[3],h[4],h[5])||le(E,b-this.opt.mouseTolerance,h[0],h[1],h[2],h[3],h[4],h[5])||le(E+this.opt.mouseTolerance,b,h[0],h[1],h[2],h[3],h[4],h[5]);break;default:a=le(E+this.opt.mouseTolerance,b+this.opt.mouseTolerance,h[0],h[1],h[2],h[3],h[4],h[5])||le(E,b+this.opt.mouseTolerance,h[0],h[1],h[2],h[3],h[4],h[5])||le(E+this.opt.mouseTolerance,b,h[0],h[1],h[2],h[3],h[4],h[5])}if(a){if(this.inSurroundingZoneCounter=null,!this.opt.debug)return!0;n=!0}}}return n},oe=function(t,e,i){if(!this.$lastOpened.length)return null;var s=re.call(this,e,i);switch(i||R){case r.DOWN_RIGHT:if(s[4]>E&&s[3]>b&&(!this.opt.hideFollowing||this.$currentSubnav[0]!==t||!this.inside))return s;break;case r.DOWN_LEFT:if(s[4]<E&&s[3]>b&&(!this.opt.hideFollowing||this.$currentSubnav[0]!==t||!this.inside))return s;break;case r.UP_RIGHT:if(s[4]>E&&s[3]<b&&(!this.opt.hideFollowing||this.$currentSubnav[0]!==t||!this.inside))return s;break;default:if(s[2]<E&&s[5]<b&&(!this.opt.hideFollowing||this.$currentSubnav[0]!==t||!this.inside))return s}},re=function(t,e){var s,n,i=ae.call(this,t);switch(e||R){case r.DOWN_RIGHT:return s=ue(t.left,t.bottom,t.right,t.bottom,t.right,t.top),n=he(s.b+i,s.A),[P,L,t.right-n.x,t.top+n.y,t.left+n.x,t.bottom-n.y];case r.DOWN_LEFT:return s=ue(t.right,t.bottom,t.left,t.bottom,t.left,t.top),n=he(s.b+i,s.A),[P,L,t.left+n.x,t.top+n.y,t.right-n.x,t.bottom-n.y];case r.UP_RIGHT:return s=ue(t.left,t.top,t.left,t.bottom,t.right,t.bottom),n=he(s.b+i,s.C),[P,L,t.right-n.x,t.bottom-n.y,t.left+n.x,t.top+n.y];default:return s=ue(t.left,t.bottom,t.right,t.bottom,t.right,t.top),n=he(s.b+i,s.A),[P,L,t.right-n.x,t.top+n.y,t.left+n.x,t.bottom-n.y]}},ae=function(t){var e=t.left+t.width/2,i=t.top+t.height/2,s=e-E,n=i-b,o=0;return s*=s,n*=n,o=Math.sqrt(s+n),Math.max(this.opt.minZoneExt,Math.min(this.opt.maxZoneExt,Math.pow(o,2)/2e3))+this.opt.zoneExtOffset},he=function(t,e){var i=t*Math.sin(e/180*Math.PI)/Math.sin(.5*Math.PI),s=i*Math.sin((90-e)/180*Math.PI)/Math.sin(e/180*Math.PI);return{x:s,y:i}},le=function(t,e,i,s,n,o,r,a){var h=r-i,l=n-i,u=t-i,p=a-s,f=o-s,c=e-s,v=h*h+p*p,g=h*l+p*f,S=h*u+p*c,O=l*l+f*f,d=l*u+f*c,m=1/(v*O-g*g),T=(O*S-g*d)*m,I=(v*d-g*S)*m;return T>=0&&I>=0&&1>T+I},ue=function(t,e,i,s,n,o){var r=Math.sqrt((i-n)*(i-n)+(s-o)*(s-o)),a=Math.sqrt((t-n)*(t-n)+(e-o)*(e-o)),h=Math.sqrt((i-t)*(i-t)+(s-e)*(s-e)),l=180*Math.acos((a*a+h*h-r*r)/(2*a*h))/Math.PI,u=180*Math.acos((r*r+h*h-a*a)/(2*r*h))/Math.PI,p=180*Math.acos((r*r+a*a-h*h)/(2*a*r))/Math.PI;return{A:l,B:u,C:p,a:r,b:a,c:h}},pe=function(t){if(!this.inside||!this.$lastOpenedSubnav.length||!t&&1>N||t&&1>C)return!1;var e=i.U.getRect(this.$lastOpenedSubnav),s=(t?e.height:e.width)/100*(100-this.opt.slidingZone),n=fe.call(this,e,s,t),o=n,r=ce(E,b,o[0],o[1],o[2],o[3]);return this.opt.debug&&r&&i.Debugger.debugRectangle(this,o[0],o[1],o[2],o[3],i.DEBUG.COLORS.SLIDING_ZONE),r},fe=function(t,e,i){switch(!0){case P>E&&!i:return[t.top,t.right-e,t.bottom,t.right];case E>=P&&!i:return[t.top,t.left,t.bottom,t.left+e];case L>b&&i:return[t.bottom-e,t.left,t.bottom,t.right];default:return[t.top,t.left,t.top+e,t.right]}},ce=function(t,e,i,s,n,o){return t>=s&&o>=t&&e>=i&&n>=e},ve=function(t){for(var e=this.resetRequestQueue.length-1;e>=0;e--)(this.resetRequestQueue[e].byOpen||t.$opener[0]===this.resetRequestQueue[e][0].$opener[0])&&this.resetRequestQueue.splice(e,1);this.resetRequestQueue.push(arguments)},ge=function(e,s,n){var o,r;if(!s){if(this.resetRequest&&!this.resetRequest.byOpen)return void ve.call(this,e);"function"==typeof this.opt.onResetPositionsStart&&this.opt.onResetPositionsStart.call(this),m=c.width(),F=f.scrollLeft(),ke.call(this),we.call(this),r=n||this.isInFirstLevel(e.$opener)?1:0,be.call(this,e,!0),o=n?t():this.getSubnav(e.$opener);var a=this.getClosestSubnav(e.$opener);this.$resetStartSubnav=n?this.$firstLevel:a,e.$resetStartSubnav=this.$resetStartSubnav,e.nextLevel=i.U.toArrayWith$Objects(this.getOpenersWithSubnavInSubnav(n?this.$firstLevel:o)),e.positionData=[],e.clear=t.proxy(function(t){clearTimeout(e.nextBatchTimeout),clearTimeout(e.resetNextTimeout),He.call(this,e.positionData,t?null:e,e.$resetStartSubnav)},this)}if(s||n){o=t();var h=0,l=e.nextLevel.length;for(h;l>h;h++){var u=this.getSubnav(e.nextLevel[h]);(this.ignoreChangeOnReset||e.skipped||Oe.call(this,u))&&(n||Se.call(this,u),o.push(u[0]))}if(this.ignoreChangeOnReset=!1,e.nextLevel=[],!o||!o.length)return void be.call(this,null);r=n||this.isInFirstLevel(o.first())?1:0}var p=[],v=[],g=[];Le.call(this,o,this.$resetStartSubnav,r,p,v,g),Ue.call(this,{openers:p,subnavs:v,items:g},r,e)},Se=function(t){t.data(a.LAST_RESET,{scrollX:B,scrollY:D,baseScrollX:this.positionBaseLastScroll.x,baseScrollY:this.positionBaseLastScroll.y,base2ScrollX:this.firstLevelPositionBaseLastScroll.x,base2ScrollY:this.firstLevelPositionBaseLastScroll.y,baseWidth:this.positionBase.right,baseHeight:this.positionBase.bottom,base2Width:this.firstLevelPositionBase.right,base2Height:this.firstLevelPositionBase.bottom,winWidth:T,winHeight:I})},Oe=function(t){var e=t.data(a.LAST_RESET);return!(e&&!t.data(a.RESET_SKIPPED)&&e.scrollX===B&&e.scrollY===D&&e.winWidth===T&&e.winHeight===I&&e.baseScrollX===this.positionBaseLastScroll.x&&e.baseScrollY===this.positionBaseLastScroll.y&&e.base2ScrollX===this.firstLevelPositionBaseLastScroll.x&&e.base2ScrollY===this.firstLevelPositionBaseLastScroll.y&&e.baseWidth===this.positionBase.right&&e.baseHeight===this.positionBase.bottom&&e.base2Width===this.firstLevelPositionBase.right&&e.base2Height===this.firstLevelPositionBase.bottom)},de=function(){var e={};e.always=t.proxy(function(){this.settingPositionsOnFirstLevelInProgress=!1},this),e.$opener=this.$nav,this.settingPositionsOnFirstLevelInProgress=!0,ge.call(this,e,!1,!0)},me=function(e,i,s){var n=t.proxy(kt,this,e,i,!0,this.$currentSubnav,s);n.$opener=e,n.byOpen=!0,ge.call(this,n)},Te=function(t,e,i){var s=this.getClosestOpener(i);if(!s.length||!this.hasOpenerOpenedSubnav(s))return void e.data(a.RESET_SKIPPED,!0);var n={};n.$opener=t,n.skipped=!0,Pe.call(this,n)||ge.call(this,n)},Ie=function(e){if(!this.$currentSubnav.length||e&&Ze.call(this))return void(e&&e.call(this));var i=t.proxy(function(){e&&e.call(this)},this),s=this.getClosestOpener(this.$currentSubnav);return i.always=t.proxy(function(){this.settingPositionsOnCurrentLevelInProgress=!1},this),i.$opener=s.length?s:this.$nav,Pe.call(this,i)?void(e&&e.call(this)):(this.settingPositionsOnCurrentLevelInProgress=!0,void ge.call(this,i))},Ee=function(){var e=t.proxy(function(){if(this.$lastOpened.length&&this.$lastOpenedSubnav[0]!==this.$currentSubnav[0]){var e=t.proxy(de,this);e.always=t.proxy(function(){this.settingPositionsOnLastOpenedLevelInProgress=!1},this),e.$opener=this.$lastOpened,this.settingPositionsOnLastOpenedLevelInProgress=!0,ge.call(this,e,!1)===!1&&e.call(this)}else de.call(this)},this);Ie.call(this,e)},be=function(t,e){this.resetRequest&&(e&&this.resetRequest.always&&this.resetRequest.always.call(this),this.resetRequest.clear&&this.resetRequest.clear(e)),this.resetRequest=t},Pe=function(t){return t.$opener?this.resetRequest&&this.resetRequest.$opener[0]===t.$opener[0]:this.resetRequest&&this.resetRequest.$opener[0]===t[0]},Le=function(e,i,s,n,o,r){var h=1===s&&this.opt.firstLevelPositionsFromCenter,l=0,p=e.length;for(l;p>l;l++){var f=t(e[l]);if(this.initializing)n.push(this.getClosestOpener(f)),o.push(f),Ce.call(this,f,null,h);else{var c=this.getClosestOpener(f);if(!c.length||this.hasOpenerOpenedSubnav(c)||this.hasOpenerFadingSubnav(c))f.data(a.RESET_SKIPPED,!0);else{var v=f.data(a.RELATIVE_TO_PARENT);v=void 0!==v?v:Xe.call(this,f,c);var g=this.getClosestSubnav(c);v&&(this.hasSubnavOpenedSubnav(g)||this.hasSubnavFadingSubnav(g))?f.data(a.RESET_SKIPPED,!0):(f.data(a.RESET_SKIPPED,!1),n.push(c),o.push(f),Ce.call(this,f,g,h))}}}l=0,p=n.length;var S,O;for(l;p>l;l++)S=n[l],O=this.itemOpensSubnav?u:this.getClosestItem(S),r.push(O),Ne.call(this,S,O,h);1===s&&Re.call(this,o,r,n)},Ce=function(t,e,s){if(i.U.removeClass(t,this.opt.subnavTop,this.opt.subnavBottom,this.opt.subnavRight,this.opt.subnavLeft),!s&&this.opt.inheritPosition!==i.POSITIONS.DIRECTION.NONE){var n=e||this.getClosestSubnav(t.parent()),o=[];(this.opt.inheritPosition==i.POSITIONS.DIRECTION.BOTH||this.opt.inheritPosition===i.POSITIONS.DIRECTION.VERTICAL)&&(i.U.hasClass(n,this.opt.subnavTop)?o.push(this.opt.subnavTop):i.U.hasClass(n,this.opt.subnavBottom)&&o.push(this.opt.subnavBottom)),(this.opt.inheritPosition==i.POSITIONS.DIRECTION.BOTH||this.opt.inheritPosition===i.POSITIONS.DIRECTION.HORIZONTAL)&&(i.U.hasClass(n,this.opt.subnavLeft)?o.push(this.opt.subnavLeft):i.U.hasClass(n,this.opt.subnavRight)&&o.push(this.opt.subnavRight)),o.length&&(o.unshift(t),i.U.addClass.apply(null,o))}},Ne=function(t,e,s){if(this.itemOpensSubnav?i.U.removeClass(t,this.opt.itemHasTop,this.opt.itemHasBottom,this.opt.itemHasRight,this.opt.itemHasLeft):(i.U.removeClass(t,this.opt.openerHasTop,this.opt.openerHasBottom,this.opt.openerHasRight,this.opt.openerHasLeft),i.U.removeClass(e,this.opt.itemHasTop,this.opt.itemHasBottom,this.opt.itemHasRight,this.opt.itemHasLeft)),!s&&this.opt.inheritPosition!==i.POSITIONS.DIRECTION.NONE){var n=this.getClosestSubnav(t.parent()),o=[t],r=[e];(this.opt.inheritPosition==i.POSITIONS.DIRECTION.BOTH||this.opt.inheritPosition===i.POSITIONS.DIRECTION.VERTICAL)&&(i.U.hasClass(n,this.opt.subnavTop)?(o.push(this.opt.openerHasTop),r.push(this.opt.itemHasTop)):i.U.hasClass(n,this.opt.subnavBottom)&&(o.push(this.opt.openerHasBottom),r.push(this.opt.itemHasBottom))),(this.opt.inheritPosition==i.POSITIONS.DIRECTION.BOTH||this.opt.inheritPosition===i.POSITIONS.DIRECTION.HORIZONTAL)&&(i.U.hasClass(n,this.opt.subnavLeft)?(o.push(this.opt.openerHasLeft),r.push(this.opt.itemHasLeft)):i.U.hasClass(n,this.opt.subnavRight)&&(o.push(this.opt.openerHasRight),r.push(this.opt.itemHasRight))),o.length>1&&(this.itemOpensSubnav?(r[0]=t,i.U.addClass.apply(null,r)):(i.U.addClass.apply(null,o),i.U.addClass.apply(null,r)))}},Re=function(t,e,s){if(!this.opt.positionSkipOnFirstLevel&&this.opt.firstLevelPositionsFromCenter){var n=this.firstLevelPositionBase.top+(this.firstLevelPositionBase.bottom-this.firstLevelPositionBase.top)/2,o=this.firstLevelPositionBase.left+(this.firstLevelPositionBase.right-this.firstLevelPositionBase.left)/2,r=0,a=t.length;for(r;a>r;r++){var h=i.U.getRect(s[r]),l=h.top+h.height/2,u=h.left+h.width/2;(this.opt.firstLevelPositionsFromCenter==i.POSITIONS.DIRECTION.BOTH||this.opt.firstLevelPositionsFromCenter===i.POSITIONS.DIRECTION.VERTICAL)&&(n>l?(i.U.addClass(t[r],this.opt.subnavBottom),this.itemOpensSubnav?i.U.addClass(s[r],this.opt.itemHasBottom):(i.U.addClass(s[r],this.opt.openerHasBottom),i.U.addClass(e[r],this.opt.itemHasBottom))):(i.U.addClass(t[r],this.opt.subnavTop),this.itemOpensSubnav?i.U.addClass(s[r],this.opt.itemHasTop):(i.U.addClass(s[r],this.opt.openerHasTop),i.U.addClass(e[r],this.opt.itemHasTop)))),(this.opt.firstLevelPositionsFromCenter==i.POSITIONS.DIRECTION.BOTH||this.opt.firstLevelPositionsFromCenter===i.POSITIONS.DIRECTION.HORIZONTAL)&&(o>u?(i.U.addClass(t[r],this.opt.subnavRight),this.itemOpensSubnav?i.U.addClass(s[r],this.opt.itemHasRight):(i.U.addClass(s[r],this.opt.openerHasRight),i.U.addClass(e[r],this.opt.itemHasRight))):(i.U.addClass(t[r],this.opt.subnavLeft),this.itemOpensSubnav?i.U.addClass(s[r],this.opt.itemHasLeft):(i.U.addClass(s[r],this.opt.openerHasLeft),i.U.addClass(e[r],this.opt.itemHasLeft))))}}},Ue=function(e,s,n,o){e.skip=e.skip||[],e.results=e.results||[],e.parentSubnavs=e.parentSubnavs||[],void 0===o&&n.positionData.push(e),o=o||0;var r=o,h=e.openers.length;for(r;h>r;r++){if(r>i.POSITIONS.MAX_BATCH-1+o&&h>i.POSITIONS.MAX_BATCH+o)return void(n.nextBatchTimeout=setTimeout(t.proxy(Ue,this,e,s,n,r),0));var l=u;if(e.items[r].length||(e.items[r]=e.openers[r]),i.U.hasClass(e.items[r],this.opt.itemHighlighted)&&(i.U.removeClass(e.items[r],this.opt.itemHighlighted),this.itemOpensSubnav||i.U.removeClass(e.items[r],this.opt.openerHighlighted)),e.subnavs[r].data(a.RELATIVE_TO_PARENT)&&(l=this.getClosestSubnav(e.items[r]),l.length&&!ye.call(this,l)&&Ae.call(this,l)),e.parentSubnavs.push(l),this.itemOpensSubnav?i.U.addClass(e.openers[r],this.opt.itemOpened):(i.U.addClass(e.openers[r],this.opt.openerOpened),i.U.addClass(e.items[r],this.opt.itemOpened)),Ae.call(this,e.items[r]),e.items[r][0]!==e.openers[r][0]&&Ae.call(this,e.openers[r]),void 0===e.subnavs[r].data(a.SKIP_POSITIONING)&&Ge.call(this,e.subnavs[r],e.items[r]),e.subnavs[r].data(a.SKIP_POSITIONING))e.skip.push(r),e.results.push({});else{var p=$e.call(this,e.openers[r],e.items[r],e.subnavs[r],s);p.skip&&e.skip.push(r),e.results.push(p)}}return e.skip.length===e.openers.length?void Fe.call(this,n):void Be.call(this,e,s,n)},$e=function(t,e,s,n){var o=i.U.getRect(s),r=1===n?this.firstLevelPositionBase:this.positionBase,a=null,h=null;return xe.call(this,o,r)?{skip:!0}:(o.bottom>r.bottom&&(i.U.removeClass(s,this.opt.subnavBottom),i.U.addClass(s,this.opt.subnavTop),this.itemOpensSubnav?(i.U.removeClass(t,this.opt.itemHasBottom),i.U.addClass(t,this.opt.itemHasTop)):(i.U.removeClass(t,this.opt.openerHasBottom),i.U.addClass(t,this.opt.openerHasTop),i.U.removeClass(e,this.opt.itemHasBottom),i.U.addClass(e,this.opt.itemHasTop)),a=this.opt.subnavTop),o.right>r.right&&(i.U.removeClass(s,this.opt.subnavRight),i.U.addClass(s,this.opt.subnavLeft),this.itemOpensSubnav?(i.U.removeClass(t,this.opt.itemHasRight),i.U.addClass(t,this.opt.itemHasLeft)):(i.U.removeClass(t,this.opt.openerHasRight),i.U.addClass(t,this.opt.openerHasLeft),i.U.removeClass(e,this.opt.itemHasRight),i.U.addClass(e,this.opt.itemHasLeft)),h=this.opt.subnavLeft),{verChangedDir:a,horChangedDir:h})},Be=function(e,s,n,o){o=o||0;var r=1===s?this.firstLevelPositionBase:this.positionBase,a=o,h=e.openers.length;for(a;h>a;a++)if(-1===t.inArray(a,e.skip)){var l=i.U.getRect(e.subnavs[a]);if(l.top<=r.top&&(e.results[a].verChangedDir=this.opt.subnavBottom),l.left<=r.left&&(e.results[a].horChangedDir=this.opt.subnavRight),e.results[a].horChangedDir||e.results[a].verChangedDir){var u=e.results[a].horChangedDir===this.opt.subnavLeft,p=e.results[a].verChangedDir===this.opt.subnavTop;e.results[a].horChangedDir&&(i.U.removeClass(e.subnavs[a],u?this.opt.subnavRight:this.opt.subnavLeft),i.U.addClass(e.subnavs[a],e.results[a].horChangedDir),this.itemOpensSubnav?(i.U.removeClass(e.openers[a],u?this.opt.itemHasRight:this.opt.itemHasLeft),i.U.addClass(e.openers[a],u?this.opt.itemHasLeft:this.opt.itemHasRight)):(i.U.removeClass(e.openers[a],u?this.opt.openerHasRight:this.opt.openerHasLeft),i.U.addClass(e.openers[a],u?this.opt.openerHasLeft:this.opt.openerHasRight),i.U.removeClass(e.items[a],u?this.opt.itemHasRight:this.opt.itemHasLeft),i.U.addClass(e.items[a],u?this.opt.itemHasLeft:this.opt.itemHasRight))),e.results[a].verChangedDir&&(i.U.removeClass(e.subnavs[a],p?this.opt.subnavBottom:this.opt.subnavTop),i.U.addClass(e.subnavs[a],e.results[a].verChangedDir),this.itemOpensSubnav?(i.U.removeClass(e.openers[a],u?this.opt.itemHasBottom:this.opt.itemHasTop),i.U.addClass(e.openers[a],p?this.opt.itemHasTop:this.opt.itemHasBottom)):(i.U.removeClass(e.openers[a],p?this.opt.openerHasBottom:this.opt.openerHasTop),i.U.addClass(e.openers[a],p?this.opt.openerHasTop:this.opt.openerHasBottom),i.U.removeClass(e.items[a],p?this.opt.itemHasBottom:this.opt.itemHasTop),i.U.addClass(e.items[a],p?this.opt.itemHasTop:this.opt.itemHasBottom)))}De.call(this,e,a,l,s)}Fe.call(this,n)},De=function(t,e,s,n){if((1===n&&this.opt.firstLevelPositionBase===i.POSITIONS.BASE.WINDOW||1!==n&&this.opt.positionBase===i.POSITIONS.BASE.WINDOW)&&(t.results[e].horChangedDir===this.opt.subnavRight||!t.results[e].horChangedDir)){var o=i.U.getRect(t.subnavs[e]),r=o.right+F>m-this.opt.positionOffset;r&&Math.abs(s.left)<=f.scrollLeft()&&(i.U.removeClass(t.subnavs[e],this.opt.subnavRight),i.U.addClass(t.subnavs[e],this.opt.subnavLeft),this.itemOpensSubnav?(i.U.removeClass(t.openers[e],this.opt.itemHasRight),i.U.addClass(t.openers[e],this.opt.itemHasLeft)):(i.U.removeClass(t.openers[e],this.opt.openerHasRight),i.U.addClass(t.openers[e],this.opt.openerHasLeft),i.U.removeClass(t.items[e],this.opt.itemHasRight),i.U.addClass(t.items[e],this.opt.itemHasLeft)))}},Fe=function(t){ge.call(this,t,!0)},He=function(e,s,n){var o=0,r=e.length;for(o;r>o;o++){var h=0,l=e[o].results.length;for(h;l>h;h++)s||e[o].subnavs[h].data(a.RESET_SKIPPED,!0),this.itemOpensSubnav?i.U.removeClass(e[o].openers[h],this.opt.itemOpened):(i.U.removeClass(e[o].openers[h],this.opt.openerOpened),i.U.removeClass(e[o].items[h],this.opt.itemOpened))}(s||this).clearResetTimeout=setTimeout(t.proxy(function(){if(Me.call(this,e),n[0]===this.$resetStartSubnav[0]&&(this.$resetStartSubnav=u),s&&s.always&&s.always.call(this),"function"==typeof s&&s.call(this),"function"==typeof this.opt.onResetPositionsEnd&&this.opt.onResetPositionsEnd.call(this),this.resetRequestQueue.length){var t=this.resetRequestQueue.shift();ge.apply(this,t)}},this),s&&this.opt.fading!==i.FADING_TYPE.NONE?i.POSITIONS.RELEASE_DELAY:0)},Ae=function(t){i.U.addClass(t,i.POSITIONS.CLASSES.RESET)},_e=function(t){i.U.removeClass(t,i.POSITIONS.CLASSES.RESET)},ye=function(t){return i.U.hasClass(t,i.POSITIONS.CLASSES.RESET)},Me=function(t){var e=0,s=t.length;for(e;s>e;e++){var n=0,o=t[e].results.length;for(n;o>n;n++)this.itemOpensSubnav&&i.U.hasClass(t[e].openers[n],this.opt.itemOpened)||(this.itemOpensSubnav||!i.U.hasClass(t[e].openers[n],this.opt.openerOpened))&&(_e.call(this,t[e].items[n]),t[e].openers[n][0]!==t[e].items[n][0]&&_e.call(this,t[e].openers[n]),t[e].parentSubnavs[n].length&&_e.call(this,t[e].parentSubnavs[n]))}},Ge=function(t,e){var s=i.U.hasClass(t,this.opt.positionSkip)||this.opt.positionSkipOnFirstLevel&&!this.getClosestItem(e.parent()).length;return t.data(a.SKIP_POSITIONING,+s),s},we=function(t){var e=We.call(this,this.opt.positionBase!==i.POSITIONS.BASE.WINDOW&&this.opt.positionBase!==i.POSITIONS.BASE.PAGE?this.$positionBase:this.opt.positionBase),s={};return s.right=e.right-this.opt.positionOffset,s.left=e.left+this.opt.positionOffset,s.bottom=e.bottom-this.opt.positionOffset,s.top=e.top+this.opt.positionOffset,t?s:void(this.positionBase=s)},ke=function(t){var e=We.call(this,this.opt.firstLevelPositionBase!==i.POSITIONS.BASE.WINDOW&&this.opt.firstLevelPositionBase!==i.POSITIONS.BASE.PAGE?this.$firstLevelPositionBase:this.opt.firstLevelPositionBase),s={};return s.right=e.right-this.opt.positionOffset,s.left=e.left+this.opt.positionOffset,s.bottom=e.bottom-this.opt.positionOffset,s.top=e.top+this.opt.positionOffset,t?s:void(this.firstLevelPositionBase=s)},We=function(t){var e=0,s=0,n=0,o=0,r=f.width(),a=f.height();if(t===i.POSITIONS.BASE.PAGE){var h=i.U.getRect(v);e=h.right>r?h.right:r,s=h.bottom>a?h.bottom:a,n=h.top>0?0:h.top,o=h.left>0?0:h.left}else if("object"==typeof t||"string"==typeof t){var l=i.U.jQueryfy(t),u=i.U.getRect(l);e=u.right,s=u.bottom,n=u.top,o=u.left}else e=r,s=a;return{right:e,bottom:s,top:n,left:o}},xe=function(t,e){return t.bottom<e.bottom&&t.top>=e.top&&t.left>=e.left&&t.right<e.right},Xe=function(t,e){i.U.addClass(e,this.itemOpensSubnav?this.opt.itemOpened:this.opt.openerOpened);var s=t.offsetParent(),n=s.length&&!(this.isOpener(s)||this.isItem(s));return i.U.removeClass(e,this.itemOpensSubnav?this.opt.itemOpened:this.opt.openerOpened),t.data(a.RELATIVE_TO_PARENT,n),n},Ze=function(){return this.$currentSubnav[0]===this.$firstLevel[0]};return i.prototype=function(){var e=function(e){return this.destroy(),e&&(k.call(this,e),t.extend(this.opt,e)),w.call(this),this},s=function(){this.opt.debug&&i.Debugger.clearDebug(this),j.call(this),K.call(this),X.call(this),Z.call(this),"object"==typeof i.Debugger&&null!==i.Debugger&&i.Debugger.removeStylesForDebugging(this),this.positionBase={},this.resetRequestQueue=[],this.$nav=null,this.$firstLevel=null,x.call(this)},n=function(t,e){this.on||z.call(this);var s=i.U.jQueryfy(t,this.$nav);if(s.length&&this.isSubnav(s)&&s[0]!==this.$firstLevel[0]){this.inside=!0;var n=this.getClosestOpener(s),o=this.getClosestSubnav(n);for(this.$currentOpener=n,Dt.call(this,n,e?o:this.$firstLevel),kt.call(this,n,this.getClosestItem(n),!1,o,null,!0);s=e?u:o,s.length&&o[0]!==this.$firstLevel[0];){if(n=this.getClosestOpener(s),o=this.getClosestSubnav(n),this.opt.doNotCloseFirstLevel&&o[0]===this.$firstLevel[0]){var r=this.getOpenedItemsInSubnav(this.$firstLevel).first();r.length&&Zt.call(this,r,u,this.$firstLevel)}Xt.call(this,n,u,o)}return!0}return!1},o=function(t,e){if("string"!=typeof t&&("object"!=typeof t||null===t))return Dt.call(this,u,u,!e),j.call(this),!0;var s=i.U.jQueryfy(t,this.$nav);if(!s.length)return!1;var n=this.getClosestOpener(s),o=this.getClosestSubnav(n);return Dt.call(this,n.parent(),o,!e),this.hasFirstLevelOpenedSubnav()||j.call(this),!0},r=function(t){this.sleeping=!0,this.touchSleeping=!!t},a=function(){this.sleeping=!1,this.touchSleeping=!1},l=function(){var t=i.U.getRect(this.$nav);return!(t.bottom<=0||t.top>=f.height()||t.right<=0||t.left>=f.width())},c=function(t){return t.length&&i.U.hasClass(t,this.opt.horizontal)},v=function(t){return i.U.hasClass(t,this.itemOpensSubnav?this.opt.itemHasFadingOut:this.opt.openerHasFadingOut)},g=function(t){return i.U.hasClass(t,this.opt.itemHasFadingOut)},S=function(t){return i.U.hasClass(t,this.opt.subnavHasFadingOut)},O=function(){var t=i.U.findFirstByClass(this.$nav,this.opt.itemOpened);return t&&t.length},d=function(t,e){e=e||this.getClosestSubnav(t);var i=this.getOpenedOpenersInSubnav(e);return 1===i.length&&i[0]===t[0]?!1:!!i.length},m=function(t,e){e=e||this.getClosestSubnav(t);var i=this.getOpenersWithFadingSubnavInSubnav(e);return 1===i.length&&i[0]===t[0]?!1:!!i.length},T=function(t,e){e=e||this.getClosestSubnav(t);var i=this.getOpenedItemsInSubnav(e);return 1===i.length&&i[0]===t[0]?!1:!!i.length},I=function(t,e){e=e||this.getClosestSubnav(t);var i=this.getItemsWithFadingSubnavInSubnav(e);return 1===i.length&&i[0]===t[0]?!1:!!i.length},E=function(e,i){return this.getItem(e).parent().children(i?this.opt.item+t.trim(i):this.opt.item)},b=function(e,s){var n=this.getItemsInSubnav(e,this.itemOpensSubnav?s:null);if(this.itemOpensSubnav)return n;var r,o=[],a=0,h=n.length;for(a;h>a;a++)p[0]=n[a],r=this.getOpener(p),!r.length||s&&!i.U.matches(r,this.opt.opener+t.trim(s))||o.push(r[0]);return t(o)},P=function(t){return this.getItemsInSubnav(t,"."+this.opt.itemHasSubnav)},L=function(t){return this.getOpenersInSubnav(t,this.itemOpensSubnav?"."+this.opt.itemHasSubnav:"."+this.opt.openerHasSubnav)},C=function(t){return this.getItemsInSubnav(t,"."+this.opt.itemHasFadingOut)},N=function(t){return this.getOpenersInSubnav(t,this.itemOpensSubnav?"."+this.opt.itemHasFadingOut:"."+this.opt.openerHasFadingOut)},R=function(t){return this.getItemsInSubnav(t,"."+this.opt.itemOpened)},U=function(e){var i=this.getOpenedItemsInSubnav(e);if(this.itemOpensSubnav)return i;var s=[],n=0,o=i.length;for(n;o>n;n++)p[0]=i[n],s.push(this.getOpener(p)[0]);return t(s)},$=function(){return!!this.fadingOuts.length},B=function(t){return!!i.U.closest(t,"."+(this.itemOpensSubnav?this.opt.itemHasFadingOut:this.opt.openerHasFadingOut)).length},D=function(t){var e=this.getClosestSubnav(this.isSubnav(t)?t.parent():t);return e[0]===this.$firstLevel[0]},F=function(t){return!!i.U.closest(t,this.opt.nav+" "+this.opt.closer).length},H=function(){return i.U.hasClass(this.$firstLevel,this.opt.subnavHasOpened)},A=function(t){return i.U.closest(t,this.opt.nav+" "+this.opt.item)},_=function(t){return i.U.closest(t,this.opt.nav+" "+(this.itemOpensSubnav?this.opt.item:this.opt.opener))},y=function(t){return i.U.closest(t,this.opt.nav+" "+this.opt.subnav)},M=function(t){return i.U.findAllByClass(t||this.$nav,this.itemOpensSubnav?this.opt.itemOpened:this.opt.openerOpened)},G=function(t){
return i.U.findAllByClass(t||this.$nav,this.opt.itemOpened)},W=function(e,s){if(s){var n=[],o=this.getOpenedOpeners(e),r=this.itemOpensSubnav?this.opt.item+":not(."+this.opt.itemOpened+")":this.opt.opener+":not(."+this.opt.openerOpened+")",a=0,h=o.length;for(a;h>a;a++)p[0]=o[a],i.U.hasParent(this.$nav[0],p.closest(r)[0])||n.push(this.getSubnav(p)[0]);return t(n)}return i.U.findAll(e||this.$nav,"."+this.opt.subnavHasOpened+", ."+this.opt.currentSubnav)},V=function(t){return i.U.hasClass(t,this.opt.subnavHasOpened)},Y=function(t){return i.U.hasClass(t,this.itemOpensSubnav?this.opt.itemHasSubnav:this.opt.openerHasSubnav)},q=function(t){return i.U.hasClass(t,this.opt.itemHasSubnav)},Q=function(t){return i.U.hasClass(t,this.itemOpensSubnav?this.opt.itemOpened:this.opt.openerOpened)},J=function(t){return i.U.hasClass(t,this.opt.itemOpened)},tt=function(t){return i.U.matches(t,this.opt.nav+" "+this.opt.item)},et=function(t){return i.U.matches(t,this.opt.nav+" "+this.opt.opener)},it=function(t){return i.U.matches(t,this.opt.nav+" "+this.opt.subnav)},st=function(t,e,s){var n=i.U.findAll(t||this.$nav,s?this.opt.opener:this.itemOpensSubnav?"."+this.opt.itemHasSubnav:"."+this.opt.openerHasSubnav);return e?i.U.toArrayWith$Objects(n):n},nt=function(t,e,s){var n=i.U.findAll(t||this.$nav,s?this.opt.item:"."+this.opt.itemHasSubnav);return e?i.U.toArrayWith$Objects(n):n},ot=function(t,e){var s;return s=i.U.findAll(t||this.$nav,this.opt.subnav),e?i.U.toArrayWith$Objects(s):s},rt=function(t){return i.U.findFirst(t,this.opt.subnav)},at=function(t){return i.U.findFirst(t,this.opt.opener)},ht=function(t){return i.U.findFirst(t,this.opt.item)},lt=function(){return"object"!=typeof i.Debugger||null===i.Debugger?void(console&&console.warn&&console.warn(i.Debugger?i.Debugger:h.NO_DEBUGGER)):(this.opt.debug=!this.opt.debug,void(this.opt.debug?(i.Debugger.insertStylesForDebugging(this),this.opt.insideTimeout*=i.DEBUG.TIMEOUT_MULTIPLIER,this.opt.openTimeout*=i.DEBUG.TIMEOUT_MULTIPLIER):(i.Debugger.removeStylesForDebugging(this),this.opt.insideTimeout/=i.DEBUG.TIMEOUT_MULTIPLIER,this.opt.openTimeout/=i.DEBUG.TIMEOUT_MULTIPLIER)))};return{refresh:e,destroy:s,open:n,close:o,sleep:r,wake:a,isNavInsideViewport:l,isSubnavHorizontal:c,isAnySubnavOpened:O,isAnySubnavFading:$,isSiblingOpenerOpened:d,isSiblingOpenerFadingOut:m,isSiblingItemOpened:T,isSiblingItemFadingOut:I,isInFadingSubnav:B,isInFirstLevel:D,isSubnav:it,isOpener:et,isItem:tt,shouldCloseNav:F,hasFirstLevelOpenedSubnav:H,hasOpenerFadingSubnav:v,hasItemFadingSubnav:g,hasSubnavFadingSubnav:S,hasOpenerSubnav:Y,hasItemSubnav:q,hasSubnavOpenedSubnav:V,hasOpenerOpenedSubnav:Q,hasItemOpenedSubnav:J,getOpenersInSubnav:b,getItemsInSubnav:E,getItemsWithSubnavInSubnav:P,getOpenersWithSubnavInSubnav:L,getItemsWithFadingSubnavInSubnav:C,getOpenersWithFadingSubnavInSubnav:N,getOpenedOpenersInSubnav:U,getOpenedItemsInSubnav:R,getClosestSubnav:y,getClosestOpener:_,getClosestItem:A,getOpenedSubnavs:W,getOpenedOpeners:M,getOpenedItems:G,getAllSubnavs:ot,getAllOpeners:st,getAllItems:nt,getSubnav:rt,getOpener:at,getItem:ht,toggleDebug:lt}}(),i}()}(jQuery,window);
